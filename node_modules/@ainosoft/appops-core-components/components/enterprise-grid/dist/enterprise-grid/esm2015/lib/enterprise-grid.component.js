/**
 * @fileoverview added by tsickle
 * Generated from: lib/enterprise-grid.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Injectable, ViewChild } from '@angular/core';
import { CdkVirtualScrollViewport } from '@angular/cdk/scrolling';
import { BaseActionDispatcher } from '../action/BaseActionDispatcher';
import * as i0 from "@angular/core";
import * as i1 from "../action/BaseActionDispatcher";
export class EnterpriseGridComponent {
    /**
     * @param {?} baseActionDispatcher
     */
    constructor(baseActionDispatcher) {
        this.baseActionDispatcher = baseActionDispatcher;
        this.gridConfig = new Array();
        this.columnConfig = new Array();
        this.gridDataList = new Array();
        this.gridHeader = '';
        this.addNewUserForm = { enable: false, token: '' };
        this.enableActionToolbar = { enable: false, token: '' };
        this.enableSearchToolBar = { enable: false, token: '' };
        this.enableSearchPlaceholder = { enable: 'none', token: '' };
        this.enableSearchBar = { enable: 'none', token: '' };
        this.enableForm = { enable: false, token: '' };
        this.enablePaging = false;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.columnConfig = [];
    }
    /**
     * @param {?} data
     * @return {?}
     */
    set setGridData(data) {
        this.gridDataList = data;
        this.createGrid();
        console.log(this.gridDataList, ' enterprise grid list received');
    }
    /**
     * @param {?} data
     * @return {?}
     */
    set setGridConfig(data) {
        console.log(data, ' enterprise grid config received');
        this.gridHeader = data[0];
        this.columnConfig = data[1];
        this.gridConfig = data[2][0];
        this.sortGridConfig(this.gridConfig);
    }
    /**
     * This method sorts the grid configuration.
     * @param {?} gridConfig JSON object of grid configuration.
     * @return {?}
     */
    sortGridConfig(gridConfig) {
        /** @type {?} */
        let keys = Object.keys(gridConfig);
        /** @type {?} */
        let enterpGridCompKeys = Object.getOwnPropertyNames(this);
        for (let i = 0; i < keys.length; i++) {
            for (let j = 0; j < enterpGridCompKeys.length; j++) {
                if (keys[i] === enterpGridCompKeys[j]) {
                    this[enterpGridCompKeys[j]]['enable'] = this.gridConfig[keys[i]]['enable'];
                    this[enterpGridCompKeys[j]]['token'] = this.gridConfig[keys[i]]['token'];
                }
            }
        }
    }
    /**
     * @return {?}
     */
    setWidthByColumn() {
        /** @type {?} */
        const count = 100 / this.columnConfig.length;
        // console.log(count);
        return count;
    }
    /**
     * Creates grid rows and add styles
     * @return {?}
     */
    createRows() {
        this.row = document.createElement('tr');
        this.row.style.background = 'white';
        this.row.style.padding = '5px';
        this.row.classList.add("table-row-data");
        this.cdkVirtualViewport.appendChild(this.row);
        this.styleCells();
    }
    /**
     * Creates grid cells and add styles
     * @return {?}
     */
    styleCells() {
        for (let i = 0; i < this.columnConfig.length; i++) {
            this.tdElement = document.createElement('td');
            this.tdElement.style.paddingTop = '10px';
            this.tdElement.style.paddingBottom = '10px';
            this.tdElement.style.padding = '10px';
            this.tdElement.style.textAlign = 'left';
            this.tdElement.style.borderBottom = '1px solid #ddd';
            this.tdElement.style.fontFamily = '"Questrial", sans-serif';
            this.tdElement.style.border = 'none';
            this.tdElement.style.outline = 'none';
            this.tdElement.style.height = '39px';
            this.tdElement.style.width = this.setWidthByColumn() + '%';
            this.row.appendChild(this.tdElement);
        }
    }
    /**
     * Create table heading
     * @return {?}
     */
    createTableHeading() {
        /** @type {?} */
        const tableHeadDiv = (/** @type {?} */ (document.getElementsByClassName("th-div")[0]));
        if (tableHeadDiv.childElementCount == 0) {
            for (let i = 0; i < this.columnConfig.length; i++) {
                this.thElement = document.createElement('th');
                this.thElement.style.padding = '10px';
                this.thElement.style.textAlign = 'left';
                this.thElement.style.borderBottom = '1px solid #ddd';
                this.thElement.style.fontFamily = '"Questrial", sans-serif';
                this.thElement.style.border = 'none';
                this.thElement.style.outline = 'none';
                this.thElement.style.fontSize = '14px';
                this.thElement.style.letterSpacing = '1px';
                this.thElement.style.height = '16px';
                this.thElement.style.color = 'rgba(0,0,0,.54)';
                // this.thElement.whiteSpace = 'nowrap';
                this.thElement.style.width = this.setWidthByColumn() + '%';
                if (this.columnConfig[i].name === 'checkbox') {
                    this.createCheckbox();
                    this.checkbox.style.marginTop = '0px';
                    this.thElement.appendChild(this.checkbox);
                }
                else {
                    /** @type {?} */
                    const headName = this.columnConfig[i].name;
                    this.thElement.innerHTML = this.columnConfig[i].item;
                    this.thElement.classList.add(headName);
                }
                tableHeadDiv.appendChild(this.thElement);
            }
        }
    }
    /**
     * @return {?}
     */
    createCheckbox() {
        this.checkbox = document.createElement("INPUT");
        this.checkbox.setAttribute("type", "checkbox");
        this.checkbox.classList.add('checkbox');
        this.checkbox.style.transition = 'background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1)';
        this.checkbox.style.cursor = 'pointer';
        this.checkbox.style.height = '16px';
        this.checkbox.style.margin = '6px';
        this.checkbox.style.width = '16px';
        this.checkbox.style.marginLeft = '17px';
    }
    /**
     * Creates the rows and columns of the grid according to column defs and module data list
     * @return {?}
     */
    createGrid() {
        console.log('create grid');
        this.cdkVirtualViewport = document.getElementsByClassName('cdk-virtual-scroll-content-wrapper')[0];
        this.cdkVirtualViewport.style.display = 'inline-table';
        //Create table heading
        this.createTableHeading();
        for (let i = 0; i < this.gridDataList.length; i++) {
            this.createRows();
            this.createCheckbox();
            for (let moduleListKey in this.gridDataList[i]) {
                for (let columnConfigKey in this.columnConfig) {
                    if (this.columnConfig[columnConfigKey].name === moduleListKey) {
                        /** @type {?} */
                        var table = document.getElementsByClassName("table-row-data");
                        /** @type {?} */
                        var lastRowIndex = table.length;
                        /** @type {?} */
                        let tableRowData = (/** @type {?} */ (document.getElementsByClassName('table-row-data')[lastRowIndex - 1]));
                        /** @type {?} */
                        let tableDataCell = tableRowData.cells;
                        /** @type {?} */
                        let pos = this.columnConfig[columnConfigKey].position;
                        /** @type {?} */
                        let value = this.gridDataList[i][moduleListKey];
                        tableDataCell[0].appendChild(this.checkbox);
                        tableDataCell[pos].innerHTML = value;
                    }
                }
            }
        }
    }
    /**
     * Search filteration by name
     *  (Still in progress)
     * @param {?} data
     * @return {?}
     */
    searchByName(data) {
        this.gridDataList = [];
        for (let i = 0; i < this.gridDataList.length; i++) {
            if (this.gridDataList[i].firstName.includes(data)) {
                this.gridDataList.push(this.gridDataList[i]);
            }
        }
    }
    /**
     * @param {?} a
     * @return {?}
     */
    getNextBatchOfImages(a) {
        if (this.virtualScroll.measureScrollOffset('bottom') === 0) {
        }
    }
    /**
     * Forward the event to dispatch action with tokens and parameters.
     * @param {?} token
     * @return {?}
     */
    addNewUserFormAction(token) {
        this.baseActionDispatcher.dispatchAction(token);
    }
    /**
     * Toggles from search placeholder to search bar/box by setting the display value
     * @param {?} action
     * @return {?}
     */
    toggleToSearchBar(action) {
        this.baseActionDispatcher.dispatchAction(action);
    }
}
EnterpriseGridComponent.decorators = [
    { type: Component, args: [{
                selector: 'ao-enterprise-grid',
                template: "<div class=\"gridBgColor enterp-grid-container\">\r\n    <mat-toolbar class=\"gridBgColor action-bar\" *ngIf=\"enableActionToolbar.enable\">\r\n        <h2>{{gridHeader}} | </h2>\r\n        <span> Showing all {{gridHeader + 's' | lowercase}}</span>\r\n\r\n        <button mat-button class=\"action-button\" *ngIf=\"addNewUserForm.enable\"\r\n            (click)=\"addNewUserFormAction(addNewUserForm.token)\" matTooltip=\"Add new {{gridHeader | lowercase}}\">\r\n            Add new {{gridHeader | lowercase}}\r\n        </button>\r\n\r\n        <button mat-button [matMenuTriggerFor]=\"afterMenu\" class=\"action-button\" matTooltip=\"more actions\">More\r\n            <mat-icon>arrow_drop_down</mat-icon>\r\n        </button>\r\n        <mat-menu #afterMenu=\"matMenu\" xPosition=\"after\">\r\n            <button mat-menu-item>{{gridHeader | lowercase}} meta config</button>\r\n        </mat-menu>\r\n\r\n    </mat-toolbar>\r\n    <mat-toolbar class=\"search-toolbar\" *ngIf=\"enableSearchToolBar.enable\">\r\n\r\n        <div class=\"search-placeholder\" *ngIf=\"enableSearchPlaceholder.enable\">\r\n            <button mat-button class=\"filter-button\" (click)='toggleToSearchBar(enableSearchPlaceholder.token)'>\r\n                <mat-icon>add</mat-icon> Add a filter\r\n            </button>\r\n        </div>\r\n        <mat-form-field class=\"search-field\" *ngIf=\"enableSearchBar.enable\">\r\n            <input type=\"text\" class=\"search-input\" matInput placeholder=\"search\" [ngModel]=\"filterValue\"\r\n                (ngModelChange)=\"filterValue=searchByName(filterValue)\">\r\n        </mat-form-field>\r\n\r\n    </mat-toolbar>\r\n\r\n    <div class='table-card'>\r\n        <div class=\"th-div\">\r\n\r\n        </div>\r\n\r\n        <cdk-virtual-scroll-viewport CdkScrollable itemSize=\"1\" id=\"example-viewport1\"\r\n            (scroll)='getNextBatchOfImages(\"Approved\")'>\r\n\r\n        </cdk-virtual-scroll-viewport>\r\n    </div>\r\n\r\n    <mat-toolbar class=\"footer\">\r\n        <p>Ainosoft \u00A92017 All rights reserved</p>\r\n    </mat-toolbar>\r\n\r\n</div>",
                styles: [".gridBgColor{background:#f0f1f3}.search-toolbar{background:#fff}span{font-weight:100;color:rgba(0,0,0,.54);font-size:15px;margin-left:2px}h2{margin-left:5px;color:#414c55;font-family:Questrial,sans-serif;font-weight:700;letter-spacing:1px}.mat-toolbar-row,.mat-toolbar-single-row{height:55px}.filter-button{border:1px dashed rgba(0,0,0,.26);border-radius:34px;-webkit-transition:opacity .1s cubic-bezier(.4,0,.2,1);transition:opacity .1s cubic-bezier(.4,0,.2,1);color:rgba(0,0,0,.54)}.action-button{color:#3367d6}tr:hover{background:rgba(18,154,144,.08);-webkit-transition:270ms ease-in-out;transition:270ms ease-in-out}*{word-wrap:break-word;border-spacing:0 5px}.table-card{padding:11px}.th-div{display:-webkit-box;display:flex;width:95%}#example-viewport1{height:58vh;width:100%}.checkbox{display:inline-block;height:16px;line-height:0;margin:auto 8px auto auto;-webkit-box-ordinal-group:1;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}.card{padding:8px;-webkit-animation:.5s cubic-bezier(.25,.46,.45,.94) both slide-table;animation:.5s cubic-bezier(.25,.46,.45,.94) both slide-table}@-webkit-keyframes slide-table{from{-webkit-transform:translateX(150px);transform:translateX(150px)}to{-webkit-transform:translateX(5px);transform:translateX(5px)}}@keyframes slide-table{from{-webkit-transform:translateX(150px);transform:translateX(150px)}to{-webkit-transform:translateX(5px);transform:translateX(5px)}}.search-field,.search-placeholder{border:none;font-size:14px;height:40px;min-width:200px;outline:0;padding:0;width:100%}.search-placeholder{display:block}.search-field{display:none}.footer{background:#3367d6;font:400 13.3333px Arial;color:#fff;position:fixed;bottom:0}::-webkit-scrollbar{width:4px}::-webkit-scrollbar-track{background:#f1f1f1}::-webkit-scrollbar-thumb{background:#20b2aa}"]
            }] },
    { type: Injectable, args: [{
                providedIn: 'root'
            },] }
];
/** @nocollapse */
EnterpriseGridComponent.ctorParameters = () => [
    { type: BaseActionDispatcher }
];
EnterpriseGridComponent.propDecorators = {
    virtualScroll: [{ type: ViewChild, args: [CdkVirtualScrollViewport, { static: false },] }]
};
/** @nocollapse */ EnterpriseGridComponent.ngInjectableDef = i0.ɵɵdefineInjectable({ factory: function EnterpriseGridComponent_Factory() { return new EnterpriseGridComponent(i0.ɵɵinject(i1.BaseActionDispatcher)); }, token: EnterpriseGridComponent, providedIn: "root" });
if (false) {
    /** @type {?} */
    EnterpriseGridComponent.prototype.gridConfig;
    /** @type {?} */
    EnterpriseGridComponent.prototype.columnConfig;
    /** @type {?} */
    EnterpriseGridComponent.prototype.gridDataList;
    /** @type {?} */
    EnterpriseGridComponent.prototype.gridHeader;
    /** @type {?} */
    EnterpriseGridComponent.prototype.addNewUserForm;
    /** @type {?} */
    EnterpriseGridComponent.prototype.enableActionToolbar;
    /** @type {?} */
    EnterpriseGridComponent.prototype.enableSearchToolBar;
    /** @type {?} */
    EnterpriseGridComponent.prototype.enableSearchPlaceholder;
    /** @type {?} */
    EnterpriseGridComponent.prototype.enableSearchBar;
    /** @type {?} */
    EnterpriseGridComponent.prototype.enableForm;
    /** @type {?} */
    EnterpriseGridComponent.prototype.enablePaging;
    /** @type {?} */
    EnterpriseGridComponent.prototype.row;
    /** @type {?} */
    EnterpriseGridComponent.prototype.cdkVirtualViewport;
    /** @type {?} */
    EnterpriseGridComponent.prototype.tdElement;
    /** @type {?} */
    EnterpriseGridComponent.prototype.thElement;
    /** @type {?} */
    EnterpriseGridComponent.prototype.filterValue;
    /** @type {?} */
    EnterpriseGridComponent.prototype.checkbox;
    /** @type {?} */
    EnterpriseGridComponent.prototype.virtualScroll;
    /**
     * @type {?}
     * @private
     */
    EnterpriseGridComponent.prototype.baseActionDispatcher;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW50ZXJwcmlzZS1ncmlkLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2VudGVycHJpc2UtZ3JpZC8iLCJzb3VyY2VzIjpbImxpYi9lbnRlcnByaXNlLWdyaWQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxVQUFVLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3pFLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ2xFLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLGdDQUFnQyxDQUFDOzs7QUFVdEUsTUFBTSxPQUFPLHVCQUF1Qjs7OztJQXlCbEMsWUFBb0Isb0JBQTBDO1FBQTFDLHlCQUFvQixHQUFwQixvQkFBb0IsQ0FBc0I7UUF2QjlELGVBQVUsR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFDO1FBRXpCLGlCQUFZLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQztRQUMzQixpQkFBWSxHQUFHLElBQUksS0FBSyxFQUFFLENBQUM7UUFDM0IsZUFBVSxHQUFXLEVBQUUsQ0FBQztRQUV4QixtQkFBYyxHQUFHLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLENBQUM7UUFDOUMsd0JBQW1CLEdBQUcsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsQ0FBQztRQUNuRCx3QkFBbUIsR0FBRyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxDQUFDO1FBQ25ELDRCQUF1QixHQUFHLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLENBQUM7UUFDeEQsb0JBQWUsR0FBRyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxDQUFDO1FBQ2hELGVBQVUsR0FBRyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxDQUFDO1FBQzFDLGlCQUFZLEdBQVksS0FBSyxDQUFDO0lBV21DLENBQUM7Ozs7SUFFbEUsUUFBUTtRQUNOLElBQUksQ0FBQyxZQUFZLEdBQUcsRUFBRSxDQUFDO0lBQ3pCLENBQUM7Ozs7O0lBRUQsSUFBSSxXQUFXLENBQUMsSUFBSTtRQUNsQixJQUFJLENBQUMsWUFBWSxHQUFDLElBQUksQ0FBQztRQUN2QixJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDbEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLGdDQUFnQyxDQUFDLENBQUM7SUFDbkUsQ0FBQzs7Ozs7SUFFRCxJQUFJLGFBQWEsQ0FBQyxJQUFJO1FBQ3BCLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLGtDQUFrQyxDQUFDLENBQUM7UUFDdEQsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDMUIsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDNUIsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFN0IsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDdkMsQ0FBQzs7Ozs7O0lBTUQsY0FBYyxDQUFDLFVBQVU7O1lBQ25CLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQzs7WUFDOUIsa0JBQWtCLEdBQUcsTUFBTSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQztRQUV6RCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNwQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsa0JBQWtCLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUNsRCxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsRUFBRTtvQkFDckMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQztvQkFDM0UsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztpQkFDMUU7YUFDRjtTQUNGO0lBQ0gsQ0FBQzs7OztJQUVELGdCQUFnQjs7Y0FDUixLQUFLLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTTtRQUM1QyxzQkFBc0I7UUFDdEIsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDOzs7OztJQUdELFVBQVU7UUFDUixJQUFJLENBQUMsR0FBRyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDeEMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLE9BQU8sQ0FBQztRQUNwQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO1FBQy9CLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzlDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUNwQixDQUFDOzs7OztJQUlELFVBQVU7UUFDUixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDakQsSUFBSSxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzlDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUM7WUFDekMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsYUFBYSxHQUFHLE1BQU0sQ0FBQztZQUM1QyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO1lBQ3RDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUM7WUFDeEMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsWUFBWSxHQUFHLGdCQUFnQixDQUFDO1lBQ3JELElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyx5QkFBeUIsQ0FBQztZQUM1RCxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1lBQ3JDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7WUFDdEMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztZQUNyQyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEdBQUcsR0FBRyxDQUFDO1lBQzNELElBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztTQUN0QztJQUVILENBQUM7Ozs7O0lBS0Qsa0JBQWtCOztjQUNWLFlBQVksR0FBRyxtQkFBQSxRQUFRLENBQUMsc0JBQXNCLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQWU7UUFFaEYsSUFBSSxZQUFZLENBQUMsaUJBQWlCLElBQUksQ0FBQyxFQUFFO1lBQ3ZDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDakQsSUFBSSxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUU5QyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO2dCQUN0QyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDO2dCQUN4QyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxZQUFZLEdBQUcsZ0JBQWdCLENBQUM7Z0JBQ3JELElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyx5QkFBeUIsQ0FBQztnQkFDNUQsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztnQkFDckMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztnQkFDdEMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQztnQkFDdkMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQztnQkFDM0MsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztnQkFDckMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLGlCQUFpQixDQUFDO2dCQUMvQyx3Q0FBd0M7Z0JBQ3hDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxHQUFHLENBQUM7Z0JBRTNELElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEtBQUssVUFBVSxFQUFFO29CQUM1QyxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7b0JBQ3RCLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7b0JBQ3RDLElBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztpQkFDM0M7cUJBQU07OzBCQUNDLFFBQVEsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUk7b0JBQzFDLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO29CQUNyRCxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7aUJBQ3hDO2dCQUVELFlBQVksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO2FBQzFDO1NBQ0Y7SUFDSCxDQUFDOzs7O0lBRUQsY0FBYztRQUNaLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNoRCxJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFFL0MsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ3hDLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxvRkFBb0YsQ0FBQztRQUN0SCxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsU0FBUyxDQUFDO1FBQ3ZDLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDcEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztRQUNuQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDO1FBQ25DLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUM7SUFDMUMsQ0FBQzs7Ozs7SUFHRCxVQUFVO1FBQ1IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUMzQixJQUFJLENBQUMsa0JBQWtCLEdBQUcsUUFBUSxDQUFDLHNCQUFzQixDQUFDLG9DQUFvQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbkcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsY0FBYyxDQUFDO1FBRXZELHNCQUFzQjtRQUN0QixJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztRQUUxQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFFakQsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQ2xCLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztZQUV0QixLQUFLLElBQUksYUFBYSxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLEVBQUU7Z0JBQzlDLEtBQUssSUFBSSxlQUFlLElBQUksSUFBSSxDQUFDLFlBQVksRUFBRTtvQkFDN0MsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLGVBQWUsQ0FBQyxDQUFDLElBQUksS0FBSyxhQUFhLEVBQUU7OzRCQUN6RCxLQUFLLEdBQUcsUUFBUSxDQUFDLHNCQUFzQixDQUFDLGdCQUFnQixDQUFDOzs0QkFFekQsWUFBWSxHQUFHLEtBQUssQ0FBQyxNQUFNOzs0QkFFM0IsWUFBWSxHQUFHLG1CQUFBLFFBQVEsQ0FBQyxzQkFBc0IsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsRUFBdUI7OzRCQUV6RyxhQUFhLEdBQUcsWUFBWSxDQUFDLEtBQUs7OzRCQUVsQyxHQUFHLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxlQUFlLENBQUMsQ0FBQyxRQUFROzs0QkFFakQsS0FBSyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDO3dCQUUvQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQzt3QkFFNUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7cUJBQ3RDO2lCQUNGO2FBQ0Y7U0FDRjtJQUNILENBQUM7Ozs7Ozs7SUFLRCxZQUFZLENBQUMsSUFBSTtRQUVmLElBQUksQ0FBQyxZQUFZLEdBQUcsRUFBRSxDQUFDO1FBQ3ZCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNqRCxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRTtnQkFDakQsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQzlDO1NBQ0Y7SUFDSCxDQUFDOzs7OztJQUVELG9CQUFvQixDQUFDLENBQUM7UUFFcEIsSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLG1CQUFtQixDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsRUFBRTtTQUUzRDtJQUNILENBQUM7Ozs7OztJQUtELG9CQUFvQixDQUFDLEtBQUs7UUFDeEIsSUFBSSxDQUFDLG9CQUFvQixDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNsRCxDQUFDOzs7Ozs7SUFHRCxpQkFBaUIsQ0FBQyxNQUFNO1FBQ3RCLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDbkQsQ0FBQzs7O1lBbk9GLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUsb0JBQW9CO2dCQUM5Qixpa0VBQStDOzthQUVoRDtZQUNBLFVBQVUsU0FBQztnQkFDVixVQUFVLEVBQUUsTUFBTTthQUNuQjs7OztZQVRRLG9CQUFvQjs7OzRCQWlDMUIsU0FBUyxTQUFDLHdCQUF3QixFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRTs7Ozs7SUFyQnRELDZDQUF5Qjs7SUFFekIsK0NBQTJCOztJQUMzQiwrQ0FBMkI7O0lBQzNCLDZDQUF3Qjs7SUFFeEIsaURBQThDOztJQUM5QyxzREFBbUQ7O0lBQ25ELHNEQUFtRDs7SUFDbkQsMERBQXdEOztJQUN4RCxrREFBZ0Q7O0lBQ2hELDZDQUEwQzs7SUFDMUMsK0NBQThCOztJQUU5QixzQ0FBeUI7O0lBQ3pCLHFEQUFtQjs7SUFDbkIsNENBQWdDOztJQUNoQyw0Q0FBc0M7O0lBQ3RDLDhDQUFZOztJQUNaLDJDQUFTOztJQUVULGdEQUFnRzs7Ozs7SUFFcEYsdURBQWtEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIEluamVjdGFibGUsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBDZGtWaXJ0dWFsU2Nyb2xsVmlld3BvcnQgfSBmcm9tICdAYW5ndWxhci9jZGsvc2Nyb2xsaW5nJztcclxuaW1wb3J0IHsgQmFzZUFjdGlvbkRpc3BhdGNoZXIgfSBmcm9tICcuLi9hY3Rpb24vQmFzZUFjdGlvbkRpc3BhdGNoZXInO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdhby1lbnRlcnByaXNlLWdyaWQnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9lbnRlcnByaXNlLWdyaWQuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL2VudGVycHJpc2UtZ3JpZC5jb21wb25lbnQuc2NzcyddLFxyXG59KVxyXG5ASW5qZWN0YWJsZSh7XHJcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBFbnRlcnByaXNlR3JpZENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcblxyXG4gIGdyaWRDb25maWcgPSBuZXcgQXJyYXkoKTtcclxuXHJcbiAgY29sdW1uQ29uZmlnID0gbmV3IEFycmF5KCk7XHJcbiAgZ3JpZERhdGFMaXN0ID0gbmV3IEFycmF5KCk7XHJcbiAgZ3JpZEhlYWRlcjogc3RyaW5nID0gJyc7XHJcblxyXG4gIGFkZE5ld1VzZXJGb3JtID0geyBlbmFibGU6IGZhbHNlLCB0b2tlbjogJycgfTtcclxuICBlbmFibGVBY3Rpb25Ub29sYmFyID0geyBlbmFibGU6IGZhbHNlLCB0b2tlbjogJycgfTtcclxuICBlbmFibGVTZWFyY2hUb29sQmFyID0geyBlbmFibGU6IGZhbHNlLCB0b2tlbjogJycgfTtcclxuICBlbmFibGVTZWFyY2hQbGFjZWhvbGRlciA9IHsgZW5hYmxlOiAnbm9uZScsIHRva2VuOiAnJyB9O1xyXG4gIGVuYWJsZVNlYXJjaEJhciA9IHsgZW5hYmxlOiAnbm9uZScsIHRva2VuOiAnJyB9O1xyXG4gIGVuYWJsZUZvcm0gPSB7IGVuYWJsZTogZmFsc2UsIHRva2VuOiAnJyB9O1xyXG4gIGVuYWJsZVBhZ2luZzogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICByb3c6IEhUTUxUYWJsZVJvd0VsZW1lbnQ7XHJcbiAgY2RrVmlydHVhbFZpZXdwb3J0O1xyXG4gIHRkRWxlbWVudDogSFRNTFRhYmxlQ2VsbEVsZW1lbnQ7XHJcbiAgdGhFbGVtZW50OiBIVE1MVGFibGVIZWFkZXJDZWxsRWxlbWVudDtcclxuICBmaWx0ZXJWYWx1ZTtcclxuICBjaGVja2JveDtcclxuXHJcbiAgQFZpZXdDaGlsZChDZGtWaXJ0dWFsU2Nyb2xsVmlld3BvcnQsIHsgc3RhdGljOiBmYWxzZSB9KSB2aXJ0dWFsU2Nyb2xsOiBDZGtWaXJ0dWFsU2Nyb2xsVmlld3BvcnQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgYmFzZUFjdGlvbkRpc3BhdGNoZXI6IEJhc2VBY3Rpb25EaXNwYXRjaGVyKSB7fVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIHRoaXMuY29sdW1uQ29uZmlnID0gW107XHJcbiAgfVxyXG5cclxuICBzZXQgc2V0R3JpZERhdGEoZGF0YSkge1xyXG4gICAgdGhpcy5ncmlkRGF0YUxpc3Q9ZGF0YTtcclxuICAgIHRoaXMuY3JlYXRlR3JpZCgpO1xyXG4gICAgY29uc29sZS5sb2codGhpcy5ncmlkRGF0YUxpc3QsICcgZW50ZXJwcmlzZSBncmlkIGxpc3QgcmVjZWl2ZWQnKTtcclxuICB9XHJcblxyXG4gIHNldCBzZXRHcmlkQ29uZmlnKGRhdGEpIHtcclxuICAgIGNvbnNvbGUubG9nKGRhdGEsICcgZW50ZXJwcmlzZSBncmlkIGNvbmZpZyByZWNlaXZlZCcpO1xyXG4gICAgdGhpcy5ncmlkSGVhZGVyID0gZGF0YVswXTtcclxuICAgIHRoaXMuY29sdW1uQ29uZmlnID0gZGF0YVsxXTtcclxuICAgIHRoaXMuZ3JpZENvbmZpZyA9IGRhdGFbMl1bMF07XHJcblxyXG4gICAgdGhpcy5zb3J0R3JpZENvbmZpZyh0aGlzLmdyaWRDb25maWcpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhpcyBtZXRob2Qgc29ydHMgdGhlIGdyaWQgY29uZmlndXJhdGlvbi5cclxuICAgKiBAcGFyYW0gZ3JpZENvbmZpZyBKU09OIG9iamVjdCBvZiBncmlkIGNvbmZpZ3VyYXRpb24uXHJcbiAgICovXHJcbiAgc29ydEdyaWRDb25maWcoZ3JpZENvbmZpZykge1xyXG4gICAgbGV0IGtleXMgPSBPYmplY3Qua2V5cyhncmlkQ29uZmlnKTtcclxuICAgIGxldCBlbnRlcnBHcmlkQ29tcEtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzKTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBlbnRlcnBHcmlkQ29tcEtleXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICBpZiAoa2V5c1tpXSA9PT0gZW50ZXJwR3JpZENvbXBLZXlzW2pdKSB7XHJcbiAgICAgICAgICB0aGlzW2VudGVycEdyaWRDb21wS2V5c1tqXV1bJ2VuYWJsZSddID0gdGhpcy5ncmlkQ29uZmlnW2tleXNbaV1dWydlbmFibGUnXTtcclxuICAgICAgICAgIHRoaXNbZW50ZXJwR3JpZENvbXBLZXlzW2pdXVsndG9rZW4nXSA9IHRoaXMuZ3JpZENvbmZpZ1trZXlzW2ldXVsndG9rZW4nXTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldFdpZHRoQnlDb2x1bW4oKTogbnVtYmVyIHtcclxuICAgIGNvbnN0IGNvdW50ID0gMTAwIC8gdGhpcy5jb2x1bW5Db25maWcubGVuZ3RoO1xyXG4gICAgLy8gY29uc29sZS5sb2coY291bnQpO1xyXG4gICAgcmV0dXJuIGNvdW50O1xyXG4gIH1cclxuXHJcbiAgLyoqIENyZWF0ZXMgZ3JpZCByb3dzIGFuZCBhZGQgc3R5bGVzICovXHJcbiAgY3JlYXRlUm93cygpIHtcclxuICAgIHRoaXMucm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcclxuICAgIHRoaXMucm93LnN0eWxlLmJhY2tncm91bmQgPSAnd2hpdGUnO1xyXG4gICAgdGhpcy5yb3cuc3R5bGUucGFkZGluZyA9ICc1cHgnO1xyXG4gICAgdGhpcy5yb3cuY2xhc3NMaXN0LmFkZChcInRhYmxlLXJvdy1kYXRhXCIpO1xyXG4gICAgdGhpcy5jZGtWaXJ0dWFsVmlld3BvcnQuYXBwZW5kQ2hpbGQodGhpcy5yb3cpO1xyXG4gICAgdGhpcy5zdHlsZUNlbGxzKCk7XHJcbiAgfVxyXG5cclxuICAvKiogQ3JlYXRlcyBncmlkIGNlbGxzIGFuZCBhZGQgc3R5bGVzICovXHJcblxyXG4gIHN0eWxlQ2VsbHMoKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29sdW1uQ29uZmlnLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHRoaXMudGRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcclxuICAgICAgdGhpcy50ZEVsZW1lbnQuc3R5bGUucGFkZGluZ1RvcCA9ICcxMHB4JztcclxuICAgICAgdGhpcy50ZEVsZW1lbnQuc3R5bGUucGFkZGluZ0JvdHRvbSA9ICcxMHB4JztcclxuICAgICAgdGhpcy50ZEVsZW1lbnQuc3R5bGUucGFkZGluZyA9ICcxMHB4JztcclxuICAgICAgdGhpcy50ZEVsZW1lbnQuc3R5bGUudGV4dEFsaWduID0gJ2xlZnQnO1xyXG4gICAgICB0aGlzLnRkRWxlbWVudC5zdHlsZS5ib3JkZXJCb3R0b20gPSAnMXB4IHNvbGlkICNkZGQnO1xyXG4gICAgICB0aGlzLnRkRWxlbWVudC5zdHlsZS5mb250RmFtaWx5ID0gJ1wiUXVlc3RyaWFsXCIsIHNhbnMtc2VyaWYnO1xyXG4gICAgICB0aGlzLnRkRWxlbWVudC5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XHJcbiAgICAgIHRoaXMudGRFbGVtZW50LnN0eWxlLm91dGxpbmUgPSAnbm9uZSc7XHJcbiAgICAgIHRoaXMudGRFbGVtZW50LnN0eWxlLmhlaWdodCA9ICczOXB4JztcclxuICAgICAgdGhpcy50ZEVsZW1lbnQuc3R5bGUud2lkdGggPSB0aGlzLnNldFdpZHRoQnlDb2x1bW4oKSArICclJztcclxuICAgICAgdGhpcy5yb3cuYXBwZW5kQ2hpbGQodGhpcy50ZEVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSB0YWJsZSBoZWFkaW5nXHJcbiAgICovXHJcbiAgY3JlYXRlVGFibGVIZWFkaW5nKCk6IHZvaWQge1xyXG4gICAgY29uc3QgdGFibGVIZWFkRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInRoLWRpdlwiKVswXSBhcyBIVE1MRWxlbWVudDtcclxuXHJcbiAgICBpZiAodGFibGVIZWFkRGl2LmNoaWxkRWxlbWVudENvdW50ID09IDApIHtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbHVtbkNvbmZpZy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHRoaXMudGhFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGgnKTtcclxuXHJcbiAgICAgICAgdGhpcy50aEVsZW1lbnQuc3R5bGUucGFkZGluZyA9ICcxMHB4JztcclxuICAgICAgICB0aGlzLnRoRWxlbWVudC5zdHlsZS50ZXh0QWxpZ24gPSAnbGVmdCc7XHJcbiAgICAgICAgdGhpcy50aEVsZW1lbnQuc3R5bGUuYm9yZGVyQm90dG9tID0gJzFweCBzb2xpZCAjZGRkJztcclxuICAgICAgICB0aGlzLnRoRWxlbWVudC5zdHlsZS5mb250RmFtaWx5ID0gJ1wiUXVlc3RyaWFsXCIsIHNhbnMtc2VyaWYnO1xyXG4gICAgICAgIHRoaXMudGhFbGVtZW50LnN0eWxlLmJvcmRlciA9ICdub25lJztcclxuICAgICAgICB0aGlzLnRoRWxlbWVudC5zdHlsZS5vdXRsaW5lID0gJ25vbmUnO1xyXG4gICAgICAgIHRoaXMudGhFbGVtZW50LnN0eWxlLmZvbnRTaXplID0gJzE0cHgnO1xyXG4gICAgICAgIHRoaXMudGhFbGVtZW50LnN0eWxlLmxldHRlclNwYWNpbmcgPSAnMXB4JztcclxuICAgICAgICB0aGlzLnRoRWxlbWVudC5zdHlsZS5oZWlnaHQgPSAnMTZweCc7XHJcbiAgICAgICAgdGhpcy50aEVsZW1lbnQuc3R5bGUuY29sb3IgPSAncmdiYSgwLDAsMCwuNTQpJztcclxuICAgICAgICAvLyB0aGlzLnRoRWxlbWVudC53aGl0ZVNwYWNlID0gJ25vd3JhcCc7XHJcbiAgICAgICAgdGhpcy50aEVsZW1lbnQuc3R5bGUud2lkdGggPSB0aGlzLnNldFdpZHRoQnlDb2x1bW4oKSArICclJztcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY29sdW1uQ29uZmlnW2ldLm5hbWUgPT09ICdjaGVja2JveCcpIHtcclxuICAgICAgICAgIHRoaXMuY3JlYXRlQ2hlY2tib3goKTtcclxuICAgICAgICAgIHRoaXMuY2hlY2tib3guc3R5bGUubWFyZ2luVG9wID0gJzBweCc7XHJcbiAgICAgICAgICB0aGlzLnRoRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmNoZWNrYm94KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY29uc3QgaGVhZE5hbWUgPSB0aGlzLmNvbHVtbkNvbmZpZ1tpXS5uYW1lO1xyXG4gICAgICAgICAgdGhpcy50aEVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy5jb2x1bW5Db25maWdbaV0uaXRlbTtcclxuICAgICAgICAgIHRoaXMudGhFbGVtZW50LmNsYXNzTGlzdC5hZGQoaGVhZE5hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGFibGVIZWFkRGl2LmFwcGVuZENoaWxkKHRoaXMudGhFbGVtZW50KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY3JlYXRlQ2hlY2tib3goKSB7XHJcbiAgICB0aGlzLmNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIklOUFVUXCIpO1xyXG4gICAgdGhpcy5jaGVja2JveC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIik7XHJcblxyXG4gICAgdGhpcy5jaGVja2JveC5jbGFzc0xpc3QuYWRkKCdjaGVja2JveCcpO1xyXG4gICAgdGhpcy5jaGVja2JveC5zdHlsZS50cmFuc2l0aW9uID0gJ2JhY2tncm91bmQgLjRzIGN1YmljLWJlemllciguMjUsLjgsLjI1LDEpLGJveC1zaGFkb3cgMjgwbXMgY3ViaWMtYmV6aWVyKC40LDAsLjIsMSknO1xyXG4gICAgdGhpcy5jaGVja2JveC5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XHJcbiAgICB0aGlzLmNoZWNrYm94LnN0eWxlLmhlaWdodCA9ICcxNnB4JztcclxuICAgIHRoaXMuY2hlY2tib3guc3R5bGUubWFyZ2luID0gJzZweCc7XHJcbiAgICB0aGlzLmNoZWNrYm94LnN0eWxlLndpZHRoID0gJzE2cHgnO1xyXG4gICAgdGhpcy5jaGVja2JveC5zdHlsZS5tYXJnaW5MZWZ0ID0gJzE3cHgnO1xyXG4gIH1cclxuXHJcbiAgLyoqIENyZWF0ZXMgdGhlIHJvd3MgYW5kIGNvbHVtbnMgb2YgdGhlIGdyaWQgYWNjb3JkaW5nIHRvIGNvbHVtbiBkZWZzIGFuZCBtb2R1bGUgZGF0YSBsaXN0ICovXHJcbiAgY3JlYXRlR3JpZCgpIHtcclxuICAgIGNvbnNvbGUubG9nKCdjcmVhdGUgZ3JpZCcpO1xyXG4gICAgdGhpcy5jZGtWaXJ0dWFsVmlld3BvcnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdjZGstdmlydHVhbC1zY3JvbGwtY29udGVudC13cmFwcGVyJylbMF07XHJcbiAgICB0aGlzLmNka1ZpcnR1YWxWaWV3cG9ydC5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS10YWJsZSc7XHJcblxyXG4gICAgLy9DcmVhdGUgdGFibGUgaGVhZGluZ1xyXG4gICAgdGhpcy5jcmVhdGVUYWJsZUhlYWRpbmcoKTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZ3JpZERhdGFMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgICB0aGlzLmNyZWF0ZVJvd3MoKTtcclxuICAgICAgdGhpcy5jcmVhdGVDaGVja2JveCgpO1xyXG5cclxuICAgICAgZm9yIChsZXQgbW9kdWxlTGlzdEtleSBpbiB0aGlzLmdyaWREYXRhTGlzdFtpXSkge1xyXG4gICAgICAgIGZvciAobGV0IGNvbHVtbkNvbmZpZ0tleSBpbiB0aGlzLmNvbHVtbkNvbmZpZykge1xyXG4gICAgICAgICAgaWYgKHRoaXMuY29sdW1uQ29uZmlnW2NvbHVtbkNvbmZpZ0tleV0ubmFtZSA9PT0gbW9kdWxlTGlzdEtleSkge1xyXG4gICAgICAgICAgICB2YXIgdGFibGUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwidGFibGUtcm93LWRhdGFcIik7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGFzdFJvd0luZGV4ID0gdGFibGUubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgbGV0IHRhYmxlUm93RGF0YSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3RhYmxlLXJvdy1kYXRhJylbbGFzdFJvd0luZGV4IC0gMV0gYXMgSFRNTFRhYmxlUm93RWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgIGxldCB0YWJsZURhdGFDZWxsID0gdGFibGVSb3dEYXRhLmNlbGxzO1xyXG5cclxuICAgICAgICAgICAgbGV0IHBvcyA9IHRoaXMuY29sdW1uQ29uZmlnW2NvbHVtbkNvbmZpZ0tleV0ucG9zaXRpb247XHJcblxyXG4gICAgICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLmdyaWREYXRhTGlzdFtpXVttb2R1bGVMaXN0S2V5XTtcclxuXHJcbiAgICAgICAgICAgIHRhYmxlRGF0YUNlbGxbMF0uYXBwZW5kQ2hpbGQodGhpcy5jaGVja2JveCk7XHJcblxyXG4gICAgICAgICAgICB0YWJsZURhdGFDZWxsW3Bvc10uaW5uZXJIVE1MID0gdmFsdWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiogU2VhcmNoIGZpbHRlcmF0aW9uIGJ5IG5hbWVcclxuICAgKiAgKFN0aWxsIGluIHByb2dyZXNzKVxyXG4gICAqL1xyXG4gIHNlYXJjaEJ5TmFtZShkYXRhKSB7XHJcblxyXG4gICAgdGhpcy5ncmlkRGF0YUxpc3QgPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ncmlkRGF0YUxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKHRoaXMuZ3JpZERhdGFMaXN0W2ldLmZpcnN0TmFtZS5pbmNsdWRlcyhkYXRhKSkge1xyXG4gICAgICAgIHRoaXMuZ3JpZERhdGFMaXN0LnB1c2godGhpcy5ncmlkRGF0YUxpc3RbaV0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXROZXh0QmF0Y2hPZkltYWdlcyhhKSB7XHJcblxyXG4gICAgaWYgKHRoaXMudmlydHVhbFNjcm9sbC5tZWFzdXJlU2Nyb2xsT2Zmc2V0KCdib3R0b20nKSA9PT0gMCkge1xyXG5cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZvcndhcmQgdGhlIGV2ZW50IHRvIGRpc3BhdGNoIGFjdGlvbiB3aXRoIHRva2VucyBhbmQgcGFyYW1ldGVycy5cclxuICAgKi9cclxuICBhZGROZXdVc2VyRm9ybUFjdGlvbih0b2tlbik6IHZvaWQge1xyXG4gICAgdGhpcy5iYXNlQWN0aW9uRGlzcGF0Y2hlci5kaXNwYXRjaEFjdGlvbih0b2tlbik7XHJcbiAgfVxyXG5cclxuICAvKiogVG9nZ2xlcyBmcm9tIHNlYXJjaCBwbGFjZWhvbGRlciB0byBzZWFyY2ggYmFyL2JveCBieSBzZXR0aW5nIHRoZSBkaXNwbGF5IHZhbHVlICovXHJcbiAgdG9nZ2xlVG9TZWFyY2hCYXIoYWN0aW9uKSB7XHJcbiAgICB0aGlzLmJhc2VBY3Rpb25EaXNwYXRjaGVyLmRpc3BhdGNoQWN0aW9uKGFjdGlvbik7XHJcbiAgfVxyXG59XHJcbiJdfQ==